import{a as C,b as E,c as fe}from"./chunk-EBZ2LYLW.js";import{c as me}from"./chunk-SAQXUH4V.js";import{B as z,C as U,Ca as N,Fb as ue,Ha as Z,I as q,K as B,L as $,Lb as x,Ma as Q,N as D,O as H,P as V,Pa as y,Q as M,Qa as O,S as g,Sa as J,U as d,Ua as v,Va as R,_b as he,cc as b,da as T,f as w,fc as pe,gb as Y,ha as I,hb as ee,ib as te,j as A,ja as X,ka as K,kb as ie,ma as W,mb as ne,n as P,nb as oe,ob as re,pb as se,qa as G,qb as ae,t as L,u as j,v as F,vb as de,xb as le,yb as ce}from"./chunk-6ZZGDR2S.js";import{a as u}from"./chunk-Q6UAQ426.js";var we=["editorContainer"];var ye=new g("NGX_MONACO_EDITOR_CONFIG"),ge=!1,be,Me=(()=>{let i=class i{constructor(){this.config=d(ye),this.onInit=new v,this._insideNg=!1}set insideNg(e){this._insideNg=e,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}ngAfterViewInit(){ge?be.then(()=>{this.initMonaco(this._options,this.insideNg)}):(ge=!0,be=new Promise(e=>{let t=this.config.baseUrl;if((t==="assets"||!t)&&(t="./assets/monaco/min/vs"),typeof window.monaco=="object"){this.initMonaco(this._options,this.insideNg),e();return}let n=s=>{let c=s||window.require,l={paths:{vs:`${t}`}};Object.assign(l,this.config.requireConfig||{}),c.config(l),c(["vs/editor/editor.main"],()=>{typeof this.config.onMonacoLoad=="function"&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),e()})};if(this.config.monacoRequire)n(this.config.monacoRequire);else if(window.require)if(window.require.config)n();else{var o=`${t}/loader.js`,a=new XMLHttpRequest;a.addEventListener("load",()=>{let s=document.createElement("script");s.type="text/javascript",s.text=["var nodeRequire = require;",a.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join(`
`),document.body.appendChild(s),n(window.monacoAmdRequire)}),a.open("GET",o),a.send()}else{let s=document.createElement("script");s.type="text/javascript",s.src=`${t}/loader.js`,s.addEventListener("load",()=>{n()}),document.body.appendChild(s)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(t&1&&re(we,7),t&2){let o;se(o=ae())&&(n._editorContainer=o.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},standalone:!1,decls:0,vars:0,template:function(t,n){},encapsulation:2});let r=i;return r})(),et=(()=>{let i=class i extends Me{constructor(){super(...arguments),this.zone=d(R),this._value="",this.propagateChange=e=>{},this.onTouched=()=>{}}set options(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get options(){return this._options}set model(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}writeValue(e){this._value=e||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.options.readOnly=e||this._options.readOnly}initMonaco(e,t){let n=!!e.model;if(n){let o=monaco.editor.getModel(e.model.uri||"");o?(e.model=o,e.model.setValue(this._value)):e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)}t?this._editor=monaco.editor.create(this._editorContainer.nativeElement,e):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer.nativeElement,e)}),n||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(o=>{let a=this._editor.getValue();this.zone.run(()=>{this.propagateChange(a),this._value=a})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.setTheme=o=>{this.options.theme=o,monaco.editor.setTheme(o)},this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=L(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}};i.\u0275fac=(()=>{let e;return function(n){return(e||(e=K(i)))(n||i)}})(),i.\u0275cmp=y({type:i,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[ue([{provide:fe,useExisting:H(()=>i),multi:!0}]),J],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(t,n){t&1&&te(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"],changeDetection:0});let r=i;return r})();var tt=(()=>{let i=class i{static forRoot(e={}){return{ngModule:i,providers:[{provide:ye,useValue:e}]}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=O({type:i}),i.\u0275inj=M({imports:[he]});let r=i;return r})();function ve(r,i){let e=!i?.manualCleanup?i?.injector?.get(T)??d(T):null,t=Oe(i?.equal),n;i?.requireSync?n=I({kind:0},{equal:t}):n=I({kind:1,value:i?.initialValue},{equal:t});let o,a=r.subscribe({next:s=>n.set({kind:1,value:s}),error:s=>{n.set({kind:2,error:s}),o?.()},complete:()=>{o?.()}});if(i?.requireSync&&n().kind===0)throw new D(601,!1);return o=e?.onDestroy(a.unsubscribe.bind(a)),x(()=>{let s=n();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new D(601,!1)}},{equal:i?.equal})}function Oe(r=Object.is){return(i,S)=>i.kind===1&&S.kind===1&&r(i.value,S.value)}var xe=["*"],Ce="Copy",Se="Copied",De=(()=>{let i=class i{constructor(){this._buttonClick$=new w,this.copied=ve(this._buttonClick$.pipe(B(()=>F(A(!0),j(3e3).pipe(z(!1)))),U(),q(1))),this.copiedText=x(()=>this.copied()?Se:Ce)}onCopyToClipboardClick(){this._buttonClick$.next()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y({type:i,selectors:[["markdown-clipboard"]],decls:2,vars:3,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,n){t&1&&(Y(0,"button",0),ie("click",function(){return n.onCopyToClipboardClick()}),le(1),ee()),t&2&&(de("copied",n.copied()),Z(),ce(n.copiedText()))},encapsulation:2,changeDetection:0});let r=i;return r})(),Te=new g("CLIPBOARD_OPTIONS");var Ie=new g("MARKED_EXTENSIONS"),Ne=new g("MARKED_OPTIONS"),Re=new g("MERMAID_OPTIONS"),ke=new g("SANITIZE");function Ae(r){return typeof r=="function"}var Pe="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",Le="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",je="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",Fe="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",ze="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",Ue="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information";var Ee=(()=>{let i=class i{get options(){return this._options}set options(e){this._options=u(u({},this.DEFAULT_MARKED_OPTIONS),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(){this.clipboardOptions=d(Te,{optional:!0}),this.extensions=d(Ie,{optional:!0}),this.http=d(pe,{optional:!0}),this.mermaidOptions=d(Re,{optional:!0}),this.platform=d(G),this.sanitize=d(ke,{optional:!0}),this.sanitizer=d(me),this.DEFAULT_MARKED_OPTIONS={renderer:new C},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this.DEFAULT_SECURITY_CONTEXT=N.HTML,this._options=null,this._reload$=new w,this.reload$=this._reload$.asObservable(),this.options=d(Ne,{optional:!0})}parse(e,t=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:n,inline:o,emoji:a,mermaid:s,disableSanitizer:c}=t,l=u(u({},this.options),t.markedOptions),p=l.renderer||this.renderer||new C;this.extensions&&(this.renderer=this.extendsRendererForExtensions(p)),s&&(this.renderer=this.extendsRendererForMermaid(p));let h=this.trimIndentation(e),f=n?this.decodeHtml(h):h,_=a?this.parseEmoji(f):f,m=this.parseMarked(_,l,o);return c?m:this.sanitizeHtml(m)}render(e,t=this.DEFAULT_RENDER_OPTIONS,n){let{clipboard:o,clipboardOptions:a,katex:s,katexOptions:c,mermaid:l,mermaidOptions:p}=t;s&&this.renderKatex(e,u(u({},this.DEFAULT_KATEX_OPTIONS),c)),l&&this.renderMermaid(e,u(u(u({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),p)),o&&this.renderClipboard(e,n,u(u(u({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error(Ue);return this.http.get(e,{responseType:"text"}).pipe(P(t=>this.handleExtension(e,t)))}highlight(e){if(!b(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);let t=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(t,n=>n.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!b(this.platform))return e;let t=document.createElement("textarea");return t.innerHTML=e,t.value}extendsRendererForExtensions(e){let t=e;return t.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions&&this.extensions.length>0&&E.use(...this.extensions),t.\u0275NgxMarkdownRendererExtendedForExtensions=!0),e}extendsRendererForMermaid(e){let t=e;if(t.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return e;let n=e.code;return e.code=o=>o.lang==="mermaid"?`<div class="mermaid">${o.text}</div>`:n(o),t.\u0275NgxMarkdownRendererExtendedForMermaid=!0,e}handleExtension(e,t){let n=e.lastIndexOf("://"),o=n>-1?e.substring(n+4):e,a=o.lastIndexOf("/"),s=a>-1?o.substring(a+1).split("?")[0]:"",c=s.lastIndexOf("."),l=c>-1?s.substring(c+1):"";return l&&l!=="md"?"```"+l+`
`+t+"\n```":t}parseMarked(e,t,n=!1){if(t.renderer){let o=u({},t.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete t.renderer,E.use({renderer:o})}return n?E.parseInline(e,t):E.parse(e,t)}parseEmoji(e){if(!b(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(Pe);return joypixels.shortnameToUnicode(e)}renderKatex(e,t){if(b(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(Le);renderMathInElement(e,t)}}renderClipboard(e,t,n){if(!b(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(Fe);if(!t)throw new Error(ze);let{buttonComponent:o,buttonTemplate:a}=n,s=e.querySelectorAll("pre");for(let c=0;c<s.length;c++){let l=s.item(c),p=document.createElement("div");p.style.position="relative",l.parentNode.insertBefore(p,l),p.appendChild(l);let h=document.createElement("div");h.classList.add("markdown-clipboard-toolbar"),h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.zIndex="1",p.insertAdjacentElement("beforeend",h),p.onmouseenter=()=>h.classList.add("hover"),p.onmouseleave=()=>h.classList.remove("hover");let f;if(o){let m=t.createComponent(o);f=m.hostView,m.changeDetectorRef.markForCheck()}else if(a)f=t.createEmbeddedView(a);else{let m=t.createComponent(De);f=m.hostView,m.changeDetectorRef.markForCheck()}let _;f.rootNodes.forEach(m=>{h.appendChild(m),_=new ClipboardJS(m,{text:()=>l.innerText})}),f.onDestroy(()=>_.destroy())}}renderMermaid(e,t=this.DEFAULT_MERMAID_OPTIONS){if(!b(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(je);let n=e.querySelectorAll(".mermaid");n.length!==0&&(mermaid.initialize(t),mermaid.run({nodes:n}))}trimIndentation(e){if(!e)return"";let t;return e.split(`
`).map(n=>{let o=t;return n.length>0&&(o=isNaN(o)?n.search(/\S|$/):Math.min(n.search(/\S|$/),o)),isNaN(t)&&(t=o),o?n.substring(o):n}).join(`
`)}async sanitizeHtml(e){return Ae(this.sanitize)?this.sanitize(await e):this.sanitize!==N.NONE?this.sanitizer.sanitize(this.sanitize??this.DEFAULT_SECURITY_CONTEXT,e)??"":e}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=V({token:i,factory:i.\u0275fac});let r=i;return r})(),k=function(r){return r.CommandLine="command-line",r.LineHighlight="line-highlight",r.LineNumbers="line-numbers",r}(k||{}),At=(()=>{let i=class i{constructor(){this.element=d(W),this.markdownService=d(Ee),this.viewContainerRef=d(Q),this.error=new v,this.load=new v,this.ready=new v,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new w}get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(e){this._disableSanitizer=this.coerceBooleanProperty(e)}get inline(){return this._inline}set inline(e){this._inline=this.coerceBooleanProperty(e)}get clipboard(){return this._clipboard}set clipboard(e){this._clipboard=this.coerceBooleanProperty(e)}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get mermaid(){return this._mermaid}set mermaid(e){this._mermaid=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe($(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}async render(e,t=!1){let n={decodeHtml:t,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=await this.markdownService.parse(e,n);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(e){return e!=null&&`${String(e)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:e=>{this.render(e).then(()=>{this.load.emit(e)})},error:e=>this.error.emit(e)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,k.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,k.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,t){let n=e.querySelectorAll("pre");for(let o=0;o<n.length;o++){let a=t instanceof Array?t:[t];n.item(o).classList.add(...a)}}setPluginOptions(e,t){let n=e.querySelectorAll("pre");for(let o=0;o<n.length;o++)Object.keys(t).forEach(a=>{let s=t[a];if(s){let c=this.toLispCase(a);n.item(o).setAttribute(c,s.toString())}})}toLispCase(e){let t=e.match(/([A-Z])/g);if(!t)return e;let n=e.toString();for(let o=0,a=t.length;o<a;o++)n=n.replace(new RegExp(t[o]),"-"+t[o].toLowerCase());return n.slice(0,1)==="-"&&(n=n.slice(1)),n}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y({type:i,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[X],ngContentSelectors:xe,decls:1,vars:0,template:function(t,n){t&1&&(ne(),oe(0))},encapsulation:2});let r=i;return r})();function qe(r){return[Ee,r?.loader??[],r?.clipboardOptions??[],r?.markedOptions??[],r?.mermaidOptions??[],r?.markedExtensions??[],r?.sanitize??[]]}var Pt=(()=>{let i=class i{static forRoot(e){return{ngModule:i,providers:[qe(e)]}}static forChild(){return{ngModule:i}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=O({type:i}),i.\u0275inj=M({});let r=i;return r})();export{Te as a,Ne as b,Ee as c,At as d,qe as e,Pt as f,ye as g,et as h,tt as i};
